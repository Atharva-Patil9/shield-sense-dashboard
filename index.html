<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Shield-Sense | Safety Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Barlow:wght@300;400;600;700;900&family=Barlow+Condensed:wght@400;700;900&display=swap" rel="stylesheet"/>

<style>
/* ‚îÄ‚îÄ RESET & VARIABLES ‚îÄ‚îÄ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:        #080C10;
  --surface:   #0D1117;
  --surface2:  #111820;
  --border:    #1C2A38;
  --border2:   #243040;
  --text:      #C8D8E8;
  --muted:     #4A6070;
  --dim:       #2A3A4A;

  --orange:    #F97316;
  --orange-d:  #C45B0A;
  --amber:     #F59E0B;
  --cyan:      #0EA5E9;
  --green:     #22C55E;
  --red:       #EF4444;
  --purple:    #A855F7;

  --font-mono: 'Share Tech Mono', monospace;
  --font-body: 'Barlow', sans-serif;
  --font-cond: 'Barlow Condensed', sans-serif;
}

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ‚îÄ‚îÄ SCANLINE OVERLAY ‚îÄ‚îÄ */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,0,0,0.03) 2px,
    rgba(0,0,0,0.03) 4px
  );
  pointer-events: none;
  z-index: 9999;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LOGIN PAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#login-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  background: radial-gradient(ellipse at 30% 50%, #0D1E2E 0%, #080C10 60%);
}

.login-grid-bg {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(var(--border) 1px, transparent 1px),
    linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 60px 60px;
  opacity: 0.4;
  mask-image: radial-gradient(ellipse at center, black 30%, transparent 80%);
}

.login-box {
  position: relative;
  z-index: 2;
  width: 420px;
  background: var(--surface);
  border: 1px solid var(--border2);
  padding: 48px 40px;
  clip-path: polygon(0 0, calc(100% - 20px) 0, 100% 20px, 100% 100%, 20px 100%, 0 calc(100% - 20px));
  box-shadow: 0 0 60px rgba(249, 115, 22, 0.08), 0 0 120px rgba(0,0,0,0.6);
  animation: loginFadeIn 0.8s ease forwards;
}

@keyframes loginFadeIn {
  from { opacity: 0; transform: translateY(30px); }
  to   { opacity: 1; transform: translateY(0); }
}

.login-logo {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 36px;
}

.login-helmet-icon {
  width: 44px;
  height: 44px;
  background: var(--orange);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

.login-brand {
  font-family: var(--font-cond);
  font-weight: 900;
  font-size: 26px;
  letter-spacing: 2px;
  color: #fff;
}
.login-brand span { color: var(--orange); }

.login-tagline {
  font-size: 11px;
  color: var(--muted);
  letter-spacing: 3px;
  text-transform: uppercase;
  font-family: var(--font-mono);
  margin-top: 2px;
}

.login-title {
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 14px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border);
}

.field { margin-bottom: 20px; }

.field label {
  display: block;
  font-size: 10px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--muted);
  font-family: var(--font-mono);
  margin-bottom: 8px;
}

.field input {
  width: 100%;
  background: var(--bg);
  border: 1px solid var(--border2);
  color: var(--text);
  padding: 12px 16px;
  font-family: var(--font-mono);
  font-size: 14px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.field input:focus {
  border-color: var(--orange);
  box-shadow: 0 0 0 2px rgba(249,115,22,0.15);
}
.field input::placeholder { color: var(--dim); }

.login-btn {
  width: 100%;
  background: var(--orange);
  color: #fff;
  border: none;
  padding: 14px;
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 15px;
  letter-spacing: 3px;
  text-transform: uppercase;
  cursor: pointer;
  margin-top: 8px;
  transition: background 0.2s, transform 0.1s;
  clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));
}
.login-btn:hover { background: #EA6A0A; }
.login-btn:active { transform: scale(0.99); }

.login-error {
  color: var(--red);
  font-size: 12px;
  font-family: var(--font-mono);
  margin-top: 12px;
  display: none;
  padding: 10px 12px;
  border: 1px solid rgba(239,68,68,0.3);
  background: rgba(239,68,68,0.05);
}

.login-corner {
  position: absolute;
  width: 20px; height: 20px;
  border-color: var(--orange);
  border-style: solid;
}
.corner-tl { top: -1px; left: -1px; border-width: 2px 0 0 2px; }
.corner-br { bottom: -1px; right: -1px; border-width: 0 2px 2px 0; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DASHBOARD PAGE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
#dashboard-page { display: none; min-height: 100vh; }

/* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 32px;
  height: 64px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
}

.topbar-left { display: flex; align-items: center; gap: 16px; }

.topbar-helmet {
  width: 36px; height: 36px;
  background: var(--orange);
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

.topbar-brand {
  font-family: var(--font-cond);
  font-weight: 900;
  font-size: 22px;
  letter-spacing: 2px;
  color: #fff;
}
.topbar-brand span { color: var(--orange); }

.topbar-sep {
  width: 1px; height: 30px;
  background: var(--border2);
}

.topbar-sub {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--muted);
  letter-spacing: 1px;
}

.topbar-right { display: flex; align-items: center; gap: 20px; }

.system-clock {
  font-family: var(--font-mono);
  font-size: 13px;
  color: var(--cyan);
  letter-spacing: 1px;
}

.conn-status {
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: var(--font-mono);
  font-size: 11px;
  letter-spacing: 1px;
  color: var(--muted);
}
.conn-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--green);
  box-shadow: 0 0 8px var(--green);
  animation: pulse-dot 2s infinite;
}
@keyframes pulse-dot {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.logout-btn {
  background: transparent;
  border: 1px solid var(--border2);
  color: var(--muted);
  padding: 6px 16px;
  font-family: var(--font-mono);
  font-size: 11px;
  letter-spacing: 1px;
  cursor: pointer;
  text-transform: uppercase;
  transition: all 0.2s;
}
.logout-btn:hover { border-color: var(--orange); color: var(--orange); }

/* ‚îÄ‚îÄ NAV TABS ‚îÄ‚îÄ */
.nav-tabs {
  display: flex;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding: 0 32px;
}

.nav-tab {
  padding: 14px 24px;
  font-family: var(--font-cond);
  font-weight: 700;
  font-size: 12px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
  background: none;
  border-top: none;
  border-left: none;
  border-right: none;
}
.nav-tab:hover { color: var(--text); }
.nav-tab.active { color: var(--orange); border-bottom-color: var(--orange); }

/* ‚îÄ‚îÄ CONTENT AREA ‚îÄ‚îÄ */
.tab-content { display: none; padding: 32px; }
.tab-content.active { display: block; }

/* ‚îÄ‚îÄ STATUS BAR ‚îÄ‚îÄ */
.status-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 12px 20px;
  margin-bottom: 28px;
  font-family: var(--font-mono);
  font-size: 12px;
}

.status-bar-left { display: flex; align-items: center; gap: 24px; }

.status-item {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--muted);
}

.status-badge {
  padding: 2px 10px;
  font-size: 10px;
  letter-spacing: 1px;
  font-weight: 700;
  text-transform: uppercase;
}
.badge-online  { background: rgba(34,197,94,0.15);  color: var(--green); border: 1px solid rgba(34,197,94,0.3); }
.badge-offline { background: rgba(239,68,68,0.15);   color: var(--red);   border: 1px solid rgba(239,68,68,0.3); }
.badge-warning { background: rgba(245,158,11,0.15);  color: var(--amber); border: 1px solid rgba(245,158,11,0.3); }

.last-updated { color: var(--cyan); font-size: 11px; }

/* ‚îÄ‚îÄ SENSOR GRID ‚îÄ‚îÄ */
.sensor-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  margin-bottom: 28px;
}

@media (max-width: 1100px) { .sensor-grid { grid-template-columns: repeat(2,1fr); } }
@media (max-width: 600px)  { .sensor-grid { grid-template-columns: 1fr; } }

.sensor-card {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 24px;
  position: relative;
  overflow: hidden;
  transition: border-color 0.3s, box-shadow 0.3s;
  animation: cardIn 0.6s ease backwards;
}
.sensor-card:nth-child(1) { animation-delay: 0.1s; }
.sensor-card:nth-child(2) { animation-delay: 0.2s; }
.sensor-card:nth-child(3) { animation-delay: 0.3s; }
.sensor-card:nth-child(4) { animation-delay: 0.4s; }

@keyframes cardIn {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

.sensor-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0;
  width: 3px; height: 100%;
  background: var(--card-accent, var(--cyan));
}

.sensor-card::after {
  content: '';
  position: absolute;
  top: 0; right: 0;
  width: 0; height: 0;
  border-left: 16px solid transparent;
  border-top: 16px solid var(--card-accent, var(--cyan));
  opacity: 0.4;
}

.sensor-card:hover {
  border-color: var(--card-accent, var(--cyan));
  box-shadow: 0 0 30px rgba(0,0,0,0.3), inset 0 0 30px rgba(0,0,0,0.1);
}

/* card accent colors */
.card-gas    { --card-accent: var(--red); }
.card-temp   { --card-accent: var(--amber); }
.card-hum    { --card-accent: var(--cyan); }
.card-fall   { --card-accent: var(--purple); }

.card-label {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-label-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--card-accent, var(--cyan));
}

.card-value {
  font-family: var(--font-mono);
  font-size: 52px;
  font-weight: 400;
  line-height: 1;
  color: #fff;
  margin-bottom: 4px;
  transition: color 0.4s;
}
.card-value .unit {
  font-size: 18px;
  color: var(--muted);
  margin-left: 4px;
}

.card-status {
  font-family: var(--font-cond);
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 3px;
  text-transform: uppercase;
  margin-top: 12px;
  padding: 4px 10px;
  display: inline-block;
}
.status-safe    { background: rgba(34,197,94,0.12);  color: var(--green); }
.status-warning { background: rgba(245,158,11,0.12); color: var(--amber); }
.status-danger  { background: rgba(239,68,68,0.15);  color: var(--red);   }
.status-normal  { background: rgba(14,165,233,0.12); color: var(--cyan);  }
.status-alert   { background: rgba(168,85,247,0.15); color: var(--purple); animation: flashBg 0.8s infinite; }

@keyframes flashBg {
  0%, 100% { background: rgba(168,85,247,0.15); }
  50%       { background: rgba(168,85,247,0.35); }
}

.card-bg-num {
  position: absolute;
  bottom: -10px; right: 16px;
  font-family: var(--font-cond);
  font-size: 100px;
  font-weight: 900;
  color: rgba(255,255,255,0.02);
  pointer-events: none;
  user-select: none;
  line-height: 1;
}

/* ‚îÄ‚îÄ GAUGE BAR ‚îÄ‚îÄ */
.gauge-bar {
  margin-top: 14px;
  height: 4px;
  background: var(--border);
  position: relative;
  overflow: hidden;
}
.gauge-fill {
  height: 100%;
  background: var(--card-accent, var(--cyan));
  transition: width 0.8s ease, background 0.4s;
  max-width: 100%;
}

/* ‚îÄ‚îÄ FALL CARD SPECIAL ‚îÄ‚îÄ */
.fall-indicator {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-top: 8px;
}
.fall-ring {
  width: 56px; height: 56px;
  border-radius: 50%;
  border: 3px solid var(--purple);
  display: flex; align-items: center; justify-content: center;
  font-size: 24px;
  flex-shrink: 0;
  transition: all 0.3s;
}
.fall-ring.alert {
  border-color: var(--red);
  box-shadow: 0 0 20px rgba(239,68,68,0.5);
  animation: ringFlash 0.6s infinite;
}
@keyframes ringFlash {
  0%, 100% { box-shadow: 0 0 20px rgba(239,68,68,0.5); }
  50%       { box-shadow: 0 0 40px rgba(239,68,68,0.9); }
}

.fall-text { font-family: var(--font-mono); font-size: 13px; }
.fall-text .fall-main { font-size: 22px; font-weight: 400; color: #fff; }

/* ‚îÄ‚îÄ BOTTOM ROW ‚îÄ‚îÄ */
.bottom-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}
@media (max-width: 900px) { .bottom-row { grid-template-columns: 1fr; } }

.info-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 24px;
}

.panel-title {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 20px;
  padding-bottom: 12px;
  border-bottom: 1px solid var(--border);
}

.threshold-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--border);
  font-family: var(--font-mono);
  font-size: 12px;
}
.threshold-row:last-child { border-bottom: none; }
.threshold-label { color: var(--muted); }
.threshold-val { color: var(--text); }
.threshold-warn { color: var(--amber); }
.threshold-danger { color: var(--red); }

/* mini live indicator */
.live-dot {
  display: inline-block;
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--red);
  margin-right: 6px;
  animation: pulse-dot 1s infinite;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ALERT HISTORY TAB
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.alert-header-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.alert-count-badge {
  background: rgba(249,115,22,0.15);
  border: 1px solid rgba(249,115,22,0.3);
  color: var(--orange);
  font-family: var(--font-mono);
  font-size: 12px;
  padding: 4px 14px;
  letter-spacing: 1px;
}

.alert-table-wrap {
  background: var(--surface);
  border: 1px solid var(--border);
  overflow: hidden;
}

.alert-table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--font-mono);
  font-size: 13px;
}

.alert-table thead tr {
  background: var(--surface2);
  border-bottom: 1px solid var(--border2);
}

.alert-table th {
  text-align: left;
  padding: 14px 20px;
  font-size: 10px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  font-weight: 400;
}

.alert-table tbody tr {
  border-bottom: 1px solid var(--border);
  transition: background 0.15s;
}
.alert-table tbody tr:last-child { border-bottom: none; }
.alert-table tbody tr:hover { background: rgba(255,255,255,0.02); }

.alert-table td { padding: 14px 20px; color: var(--text); }

.alert-type-chip {
  display: inline-block;
  padding: 3px 10px;
  font-size: 10px;
  letter-spacing: 1px;
  font-weight: 700;
  text-transform: uppercase;
}
.chip-gas     { background: rgba(239,68,68,0.12);   color: var(--red);    border: 1px solid rgba(239,68,68,0.25); }
.chip-temp    { background: rgba(245,158,11,0.12);  color: var(--amber);  border: 1px solid rgba(245,158,11,0.25); }
.chip-hum     { background: rgba(14,165,233,0.12);  color: var(--cyan);   border: 1px solid rgba(14,165,233,0.25); }
.chip-fall    { background: rgba(168,85,247,0.12);  color: var(--purple); border: 1px solid rgba(168,85,247,0.25); }
.chip-warning { background: rgba(245,158,11,0.12);  color: var(--amber);  border: 1px solid rgba(245,158,11,0.25); }
.chip-danger  { background: rgba(239,68,68,0.12);   color: var(--red);    border: 1px solid rgba(239,68,68,0.25); }

.no-alerts {
  text-align: center;
  padding: 60px 20px;
  color: var(--muted);
  font-family: var(--font-mono);
  font-size: 13px;
}

/* ‚îÄ‚îÄ LOADING SPINNER ‚îÄ‚îÄ */
.spinner {
  display: inline-block;
  width: 16px; height: 16px;
  border: 2px solid var(--border2);
  border-top-color: var(--orange);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  vertical-align: middle;
  margin-left: 8px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }

/* ‚îÄ‚îÄ FALL ALERT TOAST ‚îÄ‚îÄ */
.toast {
  position: fixed;
  top: 80px; right: 24px;
  background: var(--surface);
  border: 1px solid var(--red);
  border-left: 4px solid var(--red);
  padding: 16px 20px;
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text);
  z-index: 9000;
  box-shadow: 0 0 40px rgba(239,68,68,0.3);
  transform: translateX(120%);
  transition: transform 0.3s ease;
  max-width: 320px;
}
.toast.show { transform: translateX(0); }
.toast-title { color: var(--red); font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 6px; }

/* ‚îÄ‚îÄ SECTION DIVIDER ‚îÄ‚îÄ */
.section-label {
  font-family: var(--font-mono);
  font-size: 10px;
  letter-spacing: 4px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 16px;
  display: flex;
  align-items: center;
  gap: 12px;
}
.section-label::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--border);
}

/* refresh pulse animation on new data */
@keyframes dataPulse {
  0%   { box-shadow: 0 0 0 0 rgba(249,115,22,0.4); }
  70%  { box-shadow: 0 0 0 8px rgba(249,115,22,0); }
  100% { box-shadow: 0 0 0 0 rgba(249,115,22,0); }
}
.data-updated { animation: dataPulse 0.6s ease; }
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="login-page">
  <div class="login-grid-bg"></div>
  <div class="login-box">
    <div class="login-corner corner-tl"></div>
    <div class="login-corner corner-br"></div>

    <div class="login-logo">
      <div class="login-helmet-icon">‚õë</div>
      <div>
        <div class="login-brand">SHIELD<span>-SENSE</span></div>
        <div class="login-tagline">Safety Monitoring System</div>
      </div>
    </div>

    <div class="login-title">// OPERATOR LOGIN</div>

    <div class="field">
      <label>Email Address</label>
      <input type="email" id="email-input" placeholder="operator@shield.com" autocomplete="off"/>
    </div>
    <div class="field">
      <label>Password</label>
      <input type="password" id="pass-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/>
    </div>

    <button class="login-btn" id="login-btn" onclick="handleLogin()">
      AUTHENTICATE ‚Üí
    </button>

    <div class="login-error" id="login-error"></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DASHBOARD PAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="dashboard-page">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar-left">
      <div class="topbar-helmet">‚õë</div>
      <div class="topbar-brand">SHIELD<span>-SENSE</span></div>
      <div class="topbar-sep"></div>
      <div class="topbar-sub">SAFETY MONITORING SYSTEM</div>
    </div>
    <div class="topbar-right">
      <div class="system-clock" id="clock">--:--:--</div>
      <div class="conn-status">
        <div class="conn-dot" id="conn-dot"></div>
        <span id="conn-label">FIREBASE CONNECTED</span>
      </div>
      <button class="logout-btn" onclick="handleLogout()">LOGOUT</button>
    </div>
  </div>

  <!-- NAV TABS -->
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="switchTab('live', this)">LIVE MONITORING</button>
    <button class="nav-tab" onclick="switchTab('alerts', this)">ALERT HISTORY</button>
  </div>

  <!-- ‚îÄ‚îÄ LIVE MONITORING TAB ‚îÄ‚îÄ -->
  <div class="tab-content active" id="tab-live">

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-bar-left">
        <div class="status-item">
          <span class="status-badge badge-online" id="helmet-status-badge">ONLINE</span>
          <span>HELMET STATUS</span>
        </div>
        <div class="status-item">
          <span class="live-dot"></span>
          <span id="last-updated-text">Waiting for data...</span>
        </div>
        <div class="status-item" id="refresh-indicator" style="display:none;">
          <span class="spinner"></span>
          <span>REFRESHING</span>
        </div>
      </div>
      <div class="last-updated" id="last-updated-abs">--</div>
    </div>

    <!-- Sensor Cards -->
    <div class="section-label">SENSOR READINGS</div>
    <div class="sensor-grid">

      <!-- Gas Card -->
      <div class="sensor-card card-gas" id="card-gas">
        <div class="card-label">
          <div class="card-label-dot"></div>
          GAS LEVEL
        </div>
        <div class="card-value" id="gas-val">--<span class="unit">ppm</span></div>
        <div class="gauge-bar">
          <div class="gauge-fill" id="gas-gauge" style="width:0%; background: var(--red);"></div>
        </div>
        <div class="card-status status-safe" id="gas-status">SAFE</div>
        <div class="card-bg-num">GAS</div>
      </div>

      <!-- Temp Card -->
      <div class="sensor-card card-temp" id="card-temp">
        <div class="card-label">
          <div class="card-label-dot"></div>
          TEMPERATURE
        </div>
        <div class="card-value" id="temp-val">--<span class="unit">¬∞C</span></div>
        <div class="gauge-bar">
          <div class="gauge-fill" id="temp-gauge" style="width:0%; background: var(--amber);"></div>
        </div>
        <div class="card-status status-normal" id="temp-status">NORMAL</div>
        <div class="card-bg-num">TMP</div>
      </div>

      <!-- Humidity Card -->
      <div class="sensor-card card-hum" id="card-hum">
        <div class="card-label">
          <div class="card-label-dot"></div>
          HUMIDITY
        </div>
        <div class="card-value" id="hum-val">--<span class="unit">%</span></div>
        <div class="gauge-bar">
          <div class="gauge-fill" id="hum-gauge" style="width:0%;"></div>
        </div>
        <div class="card-status status-normal" id="hum-status">NORMAL</div>
        <div class="card-bg-num">HUM</div>
      </div>

      <!-- Fall Card -->
      <div class="sensor-card card-fall" id="card-fall">
        <div class="card-label">
          <div class="card-label-dot"></div>
          FALL DETECTION
        </div>
        <div class="fall-indicator">
          <div class="fall-ring" id="fall-ring">üõ°</div>
          <div class="fall-text">
            <div class="fall-main" id="fall-main">STABLE</div>
            <div style="color:var(--muted); font-size:11px; margin-top:4px;" id="fall-sub">No anomaly detected</div>
          </div>
        </div>
        <div class="card-status status-normal" id="fall-status">NORMAL</div>
        <div class="card-bg-num">G</div>
      </div>

    </div>

    <!-- Bottom Info Row -->
    <div class="section-label">SYSTEM INFO</div>
    <div class="bottom-row">

      <!-- Thresholds Panel -->
      <div class="info-panel">
        <div class="panel-title">// ALERT THRESHOLDS</div>
        <div class="threshold-row">
          <span class="threshold-label">GAS ‚Äî WARNING</span>
          <span class="threshold-warn">&gt; 400 ppm</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">GAS ‚Äî DANGER</span>
          <span class="threshold-danger">&gt; 600 ppm</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">TEMPERATURE MAX</span>
          <span class="threshold-warn">&gt; 45 ¬∞C</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">HUMIDITY MAX</span>
          <span class="threshold-warn">&gt; 85 %</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">FALL ‚Äî G-FORCE SPIKE</span>
          <span class="threshold-danger">&gt; 2.5 G</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">FALL ‚Äî FREEFALL</span>
          <span class="threshold-danger">&lt; 0.3 G</span>
        </div>
      </div>

      <!-- Firebase Info Panel -->
      <div class="info-panel">
        <div class="panel-title">// SYSTEM STATUS</div>
        <div class="threshold-row">
          <span class="threshold-label">PROJECT ID</span>
          <span class="threshold-val">shield-sense</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">RTDB REGION</span>
          <span class="threshold-val">asia-southeast1</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">CONTROLLER</span>
          <span class="threshold-val">ESP32</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">SENSORS ACTIVE</span>
          <span style="color:var(--green)">MQ-2 / DHT11 / MPU6050</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">UPDATE INTERVAL</span>
          <span class="threshold-val">3 seconds</span>
        </div>
        <div class="threshold-row">
          <span class="threshold-label">FIREBASE AUTH</span>
          <span id="firebase-auth-status" style="color:var(--green)">AUTHENTICATED</span>
        </div>
      </div>

    </div>
  </div>

  <!-- ‚îÄ‚îÄ ALERT HISTORY TAB ‚îÄ‚îÄ -->
  <div class="tab-content" id="tab-alerts">
    <div class="alert-header-bar">
      <div class="section-label" style="margin-bottom:0; flex:1;">ALERT LOG ‚Äî FIRESTORE</div>
      <div style="display:flex; gap:12px; align-items:center;">
        <div class="alert-count-badge" id="alert-count-badge">0 ALERTS</div>
        <button class="logout-btn" onclick="loadAlerts()" style="color:var(--cyan); border-color:var(--cyan);">‚Üª REFRESH</button>
      </div>
    </div>

    <div class="alert-table-wrap">
      <table class="alert-table">
        <thead>
          <tr>
            <th>#</th>
            <th>TYPE</th>
            <th>MESSAGE</th>
            <th>TIMESTAMP</th>
          </tr>
        </thead>
        <tbody id="alert-tbody">
          <tr><td colspan="4"><div class="no-alerts">Loading alerts...</div></td></tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <div class="toast-title">‚ö† ALERT DETECTED</div>
  <div id="toast-msg">Fall detected on helmet!</div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FIREBASE SDK ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getDatabase, ref, onValue }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";
import { getFirestore, collection, getDocs, orderBy, query, limit }
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// ‚îÄ‚îÄ Firebase Config ‚îÄ‚îÄ
const firebaseConfig = {
  apiKey:            "AIzaSyDpvapmsxnEJAJdyvLzTQWmkWT91_UeR4E",
  authDomain:        "shield-sense.firebaseapp.com",
  databaseURL:       "https://shield-sense-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId:         "shield-sense",
  storageBucket:     "shield-sense.firebasestorage.app",
  messagingSenderId: "88116701180",
  appId:             "1:88116701180:web:ec1f12b9b2b115d1baf479"
};

const app  = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db   = getDatabase(app);
const fs   = getFirestore(app);

let rtdbUnsub = null;
let prevFall  = false;

// ‚îÄ‚îÄ Clock ‚îÄ‚îÄ
function updateClock() {
  const n = new Date();
  document.getElementById('clock').textContent =
    n.toLocaleTimeString('en-GB', { hour12: false });
}
setInterval(updateClock, 1000);
updateClock();

// ‚îÄ‚îÄ Auth State ‚îÄ‚îÄ
onAuthStateChanged(auth, user => {
  if (user) {
    showDashboard();
  }
});

// ‚îÄ‚îÄ Login ‚îÄ‚îÄ
window.handleLogin = async function() {
  const email = document.getElementById('email-input').value.trim();
  const pass  = document.getElementById('pass-input').value;
  const errEl = document.getElementById('login-error');
  const btn   = document.getElementById('login-btn');

  errEl.style.display = 'none';
  btn.textContent = 'AUTHENTICATING...';
  btn.disabled = true;

  try {
    await signInWithEmailAndPassword(auth, email, pass);
    showDashboard();
  } catch(e) {
    let msg = 'Authentication failed.';
    if (e.code === 'auth/invalid-email')         msg = 'Invalid email address.';
    if (e.code === 'auth/user-not-found')        msg = 'No user found with this email.';
    if (e.code === 'auth/wrong-password')        msg = 'Incorrect password.';
    if (e.code === 'auth/invalid-credential')    msg = 'Invalid credentials. Check email/password.';
    errEl.textContent = '// ERROR: ' + msg;
    errEl.style.display = 'block';
  } finally {
    btn.textContent = 'AUTHENTICATE ‚Üí';
    btn.disabled = false;
  }
};

// Enter key login
document.getElementById('pass-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') window.handleLogin();
});

// ‚îÄ‚îÄ Logout ‚îÄ‚îÄ
window.handleLogout = async function() {
  if (rtdbUnsub) rtdbUnsub();
  await signOut(auth);
  document.getElementById('dashboard-page').style.display = 'none';
  document.getElementById('login-page').style.display    = 'flex';
};

// ‚îÄ‚îÄ Show Dashboard ‚îÄ‚îÄ
function showDashboard() {
  document.getElementById('login-page').style.display    = 'none';
  document.getElementById('dashboard-page').style.display = 'block';
  startRTDB();
  loadAlerts();
}

// ‚îÄ‚îÄ Tab Switch ‚îÄ‚îÄ
window.switchTab = function(tab, el) {
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('tab-' + tab).classList.add('active');
  if (tab === 'alerts') loadAlerts();
};

// ‚îÄ‚îÄ RTDB Live Listener ‚îÄ‚îÄ
function startRTDB() {
  const dataRef = ref(db, '/helmet_data');
  rtdbUnsub = onValue(dataRef, snap => {
    const d = snap.val();
    if (!d) return;
    updateCards(d);
  }, err => {
    document.getElementById('conn-dot').style.background = 'var(--red)';
    document.getElementById('conn-label').textContent = 'CONNECTION ERROR';
  });
}

// ‚îÄ‚îÄ Update UI ‚îÄ‚îÄ
function updateCards(d) {
  const now = Date.now();

  // Last updated
  const lastUp = d.last_updated ? d.last_updated * 1000 : null;
  const secAgo = lastUp ? Math.round((now - lastUp) / 1000) : null;
  document.getElementById('last-updated-text').textContent =
    secAgo !== null ? `LAST UPDATED ${secAgo}s AGO` : 'DATA RECEIVED';
  document.getElementById('last-updated-abs').textContent =
    lastUp ? new Date(lastUp).toLocaleTimeString() : '--';

  // Helmet online status
  const isOnline = secAgo !== null && secAgo < 15;
  const badge = document.getElementById('helmet-status-badge');
  badge.textContent = isOnline ? 'ONLINE' : 'OFFLINE';
  badge.className   = 'status-badge ' + (isOnline ? 'badge-online' : 'badge-offline');

  // ‚îÄ‚îÄ GAS ‚îÄ‚îÄ
  const gas = d.gas_level ?? 0;
  setCardValue('gas-val', Math.round(gas), '<span class="unit">ppm</span>');
  const gasW = Math.min((gas / 1000) * 100, 100);
  setGauge('gas-gauge', gasW);
  pulseCard('card-gas');

  let gasStatusText = 'SAFE', gasStatusClass = 'status-safe', gaugeCol = 'var(--green)';
  if (gas > 600) { gasStatusText = 'DANGER'; gasStatusClass = 'status-danger'; gaugeCol = 'var(--red)'; }
  else if (gas > 400) { gasStatusText = 'WARNING'; gasStatusClass = 'status-warning'; gaugeCol = 'var(--amber)'; }
  setStatus('gas-status', gasStatusText, gasStatusClass);
  document.getElementById('gas-gauge').style.background = gaugeCol;

  // ‚îÄ‚îÄ TEMP ‚îÄ‚îÄ
  const temp = d.temperature ?? 0;
  setCardValue('temp-val', temp.toFixed(1), '<span class="unit">¬∞C</span>');
  setGauge('temp-gauge', Math.min((temp / 60) * 100, 100));
  pulseCard('card-temp');
  const tempHot = temp > 45;
  setStatus('temp-status', tempHot ? 'HIGH TEMP' : 'NORMAL', tempHot ? 'status-danger' : 'status-normal');
  document.getElementById('temp-gauge').style.background = tempHot ? 'var(--red)' : 'var(--amber)';

  // ‚îÄ‚îÄ HUMIDITY ‚îÄ‚îÄ
  const hum = d.humidity ?? 0;
  setCardValue('hum-val', hum.toFixed(1), '<span class="unit">%</span>');
  setGauge('hum-gauge', Math.min(hum, 100));
  pulseCard('card-hum');
  const humHigh = hum > 85;
  setStatus('hum-status', humHigh ? 'HIGH HUMIDITY' : 'NORMAL', humHigh ? 'status-warning' : 'status-normal');
  document.getElementById('hum-gauge').style.background = humHigh ? 'var(--amber)' : 'var(--cyan)';

  // ‚îÄ‚îÄ FALL ‚îÄ‚îÄ
  const fall = d.fall_detected ?? false;
  const ring = document.getElementById('fall-ring');
  const fallMain = document.getElementById('fall-main');
  const fallSub  = document.getElementById('fall-sub');
  pulseCard('card-fall');

  if (fall) {
    ring.textContent = '‚ö†';
    ring.classList.add('alert');
    fallMain.textContent = 'FALL DETECTED';
    fallMain.style.color = 'var(--red)';
    fallSub.textContent  = 'Impact or freefall detected!';
    setStatus('fall-status', 'ALERT', 'status-alert');
    if (!prevFall) showToast('Fall detected on helmet unit!');
  } else {
    ring.textContent = 'üõ°';
    ring.classList.remove('alert');
    fallMain.textContent = 'STABLE';
    fallMain.style.color = '#fff';
    fallSub.textContent  = 'No anomaly detected';
    setStatus('fall-status', 'NORMAL', 'status-normal');
  }
  prevFall = fall;
}

function setCardValue(id, val, unitHtml) {
  const el = document.getElementById(id);
  el.innerHTML = val + unitHtml;
}

function setGauge(id, pct) {
  document.getElementById(id).style.width = Math.max(0, Math.min(100, pct)) + '%';
}

function setStatus(id, text, cls) {
  const el = document.getElementById(id);
  el.textContent = text;
  el.className = 'card-status ' + cls;
}

function pulseCard(id) {
  const el = document.getElementById(id);
  el.classList.remove('data-updated');
  void el.offsetWidth;
  el.classList.add('data-updated');
}

// ‚îÄ‚îÄ Toast ‚îÄ‚îÄ
function showToast(msg) {
  const t = document.getElementById('toast');
  document.getElementById('toast-msg').textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 5000);
}

// ‚îÄ‚îÄ Load Firestore Alerts ‚îÄ‚îÄ
window.loadAlerts = async function() {
  const tbody = document.getElementById('alert-tbody');
  tbody.innerHTML = '<tr><td colspan="4"><div class="no-alerts"><span class="spinner"></span> Loading...</div></td></tr>';

  try {
    const q = query(collection(fs, 'alerts'), limit(100));
    const snap = await getDocs(q);
    const docs = [];
    snap.forEach(doc => docs.push({ id: doc.id, ...doc.data() }));

    // Sort newest first by timestamp
    docs.sort((a, b) => {
      const ta = a.fields?.timestamp?.integerValue ?? a.timestamp ?? 0;
      const tb = b.fields?.timestamp?.integerValue ?? b.timestamp ?? 0;
      return tb - ta;
    });

    document.getElementById('alert-count-badge').textContent = docs.length + ' ALERT' + (docs.length !== 1 ? 'S' : '');

    if (docs.length === 0) {
      tbody.innerHTML = '<tr><td colspan="4"><div class="no-alerts">// NO ALERTS LOGGED YET</div></td></tr>';
      return;
    }

    tbody.innerHTML = '';
    docs.forEach((doc, i) => {
      // Handle both Firestore REST format and direct format
      const type    = doc.fields?.type?.stringValue    ?? doc.type    ?? 'unknown';
      const message = doc.fields?.message?.stringValue ?? doc.message ?? '‚Äî';
      const ts      = doc.fields?.timestamp?.integerValue ?? doc.timestamp ?? null;
      const time    = ts ? new Date(ts * 1000).toLocaleString() : doc.id;

      const chipClass = getChipClass(type);

      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td style="color:var(--muted)">${i + 1}</td>
        <td><span class="alert-type-chip ${chipClass}">${type.replace(/_/g,' ')}</span></td>
        <td style="color:var(--text)">${message}</td>
        <td style="color:var(--muted); font-size:11px;">${time}</td>
      `;
      tbody.appendChild(tr);
    });

  } catch(e) {
    tbody.innerHTML = `<tr><td colspan="4"><div class="no-alerts" style="color:var(--red)">// ERROR: ${e.message}</div></td></tr>`;
  }
};

function getChipClass(type) {
  if (type.includes('gas') && type.includes('danger'))  return 'chip-danger';
  if (type.includes('gas'))                              return 'chip-warning';
  if (type.includes('temp'))                             return 'chip-temp';
  if (type.includes('hum'))                              return 'chip-hum';
  if (type.includes('fall'))                             return 'chip-fall';
  return 'chip-warning';
}

</script>
</body>
</html>
